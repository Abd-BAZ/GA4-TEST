<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GA-4 Website</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Google Analytics Tracking with UTM Support -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FP2VEQZF5N"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        // Capture UTM parameters from URL
        function getUTMParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name) || "unknown";
        }

        // Send UTM parameters to GA4
        gtag('config', 'G-FP2VEQZF5N', {
            'page_location': window.location.href,
            'page_referrer': document.referrer,
            'campaign_source': getUTMParameter('utm_source'),
            'campaign_medium': getUTMParameter('utm_medium'),
            'campaign_name': getUTMParameter('utm_campaign'),
            'campaign_term': getUTMParameter('utm_term'),
            'campaign_content': getUTMParameter('utm_content'),
            'user_type': document.referrer ? 'returning':'new', //Tracks new vs. returning users
            'content_type': 'FAQ Page' //custom dimension for content type
        });
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-PRN846G6');
    </script>
    <!-- End Google Tag Manager -->
</head>
<body>

    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PRN846G6"
        height="0" width="0" style="display:none;visibility:hidden">
        </iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Navigation Bar -->
    <div class="navbar">
        <a href="{{ url_for('index') }}?utm_source=internal&utm_medium=nav&utm_campaign=home">Home</a>
        <a href="{{ url_for('about') }}?utm_source=internal&utm_medium=nav&utm_campaign=about">About</a>
        <a href="{{ url_for('faq') }}?utm_source=internal&utm_medium=nav&utm_campaign=faq">FAQ</a>
        <a href="{{ url_for('live_stats') }}?utm_source=internal&utm_medium=nav&utm_campaign=live_stats">Live Stats</a>
    </div>
    <div class="nav-right">
    </div>

    <!-- Main Content -->
    <div class="container">
        <h1>Welcome to GA-4!</h1>
        <p>This is a simple Flask website.</p>
        <p>Click here to download our PDF file:</p>
        <a href="{{ url_for('static', filename='files/Permohonan Data Bagi Pekerja Sambilan Di Universiti Brunei Darussalam (UBD).pdf') }}" 
           download="GA4-Sample.pdf">
           Download Here
        </a>
    </div>

    <!---Container for the image galleries-->
    <div class="container">

        <!--Full-width images with number text-->
        <div class="mySlides">
            <div class="numbertext">1 / 2</div>
            <img src="{{ url_for('static', filename='images/image1.jpg') }}" alt="Figurine 1" style="width:100%">
        </div>

        <div class="mySlides">
            <div class="numbertext">2 / 2</div>
            <img src="{{ url_for('static',filename='images/image2.jpg') }}" alt="Figurine 2" style="width:100%">
        </div>

        <!--Next and previous buttons-->
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>

        <!-- Image Text-->
         <div class="caption-container">
            <p id="caption"></p>
         </div>

         <!--Thumbnail images-->
         <div class="row">
            <div class="column">
                <img class="demo cursor" src="images/image1.jpg" style="width:100%"
                onclick="currentSlide(1)" alt="Figurine 1">
            </div>
            <div class="column">
                <img class="demo cursor" src="images/image2.jpg" style="width:100%"
                onclick="currentSlide(2)" alt="Figurine 2">
            </div>
         </div>
    </div>

    <!--Javascript for Image Slider-->
    <script>
        let slideIndex =1;
        showSlides(slideIndex);

        function plusSlides(n){
            showSlides(slideIndex += n);
        }

        function currentSlide(n){
            showSlides(slideIndex = n);
        }

        function showSlides(n){
            let i;
            let slides = document.getElementsByClassName("mySlides");
            let dots = document.getElementsByClassName("demo");

            if (n > slides.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = slides.length }

            for (i = 0; i < slides.length; i++){
                slides[i].style.display = "none";
            }

            for (i = 0; i < dots.length; i++){
                dots[i].className = dots[i].className.replace("active", "");
            }

            slides[slideIndex - 1].style.display = "block";
            dots[slideIndex - 1].className += "active";
        }
    </script>

</body>
</html>